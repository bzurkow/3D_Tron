'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ClearPass = undefined;

var _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');

var _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = require('babel-runtime/helpers/createClass');

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var _Pass2 = require('./Pass.js');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var ClearPass = exports.ClearPass = function (_Pass) {
  (0, _inherits3.default)(ClearPass, _Pass);

  function ClearPass(name, clearColor, clearAlpha) {
    (0, _classCallCheck3.default)(this, ClearPass);

    var _this = (0, _possibleConstructorReturn3.default)(this, (ClearPass.__proto__ || (0, _getPrototypeOf2.default)(ClearPass)).call(this, name));

    _this.needsSwap = false;
    _this.clearColor = clearColor === undefined ? 0x000000 : clearColor;
    _this.clearAlpha = clearAlpha === undefined ? 0 : clearAlpha;
    return _this;
  }

  (0, _createClass3.default)(ClearPass, [{
    key: 'render',
    value: function render(renderer, writeBuffer, readBuffer) {
      // REMARK: "maskActive" and "delta" never used. Removed.
      // render(renderer, writeBuffer, readBuffer, delta, maskActive) {

      var oldClearColor = void 0,
          oldClearAlpha = void 0;

      if (this.clearColor) {
        oldClearColor = renderer.getClearColor().getHex();
        oldClearAlpha = renderer.getClearAlpha();
        renderer.setClearColor(this.clearColor, this.clearAlpha);
      }

      renderer.setRenderTarget(this.renderToScreen ? null : readBuffer);
      renderer.clear();

      if (this.clearColor) renderer.setClearColor(oldClearColor, oldClearAlpha);
    }
  }]);
  return ClearPass;
}(_Pass2.Pass); /**
                 * @author mrdoob / http://mrdoob.com/
                 * @author yannis torres / es6 migration
                 */